<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>什么是防抖和节流？有什么区别？如何实现</title>
</head>
<body>
	<p>
		防抖:触发高频事件后n秒内函数只会执行一次，如果n秒内高频事件再次被触发，则重新计算时间
	</p>
	<p>节流: 高频事件触发，但在n秒内只会执行一次，所以节流会稀释函数的执行频率。</p>
	<p>
		<span>防抖</span>
		<input id="inp">
	</p>
	<p>
		<span>节流</span>
		<input id="inp_throttle">
	</p>
	<script type="text/javascript">
		var inp = document.getElementById('inp')
		inp.addEventListener('input', debounce(sayHi, 2000))
		/**
		 * 防抖
		 */
		function debounce(fn, wait) {
			var timeout = null
			return function () {
				clearTimeout(timeout)
				timeout = setTimeout(() => {
					fn.apply(this, arguments)
				}, wait)
			}
		}
		function sayHi() {
			console.log(this)
			console.log(arguments)
			console.log('防抖成功....')
		}


		/**
		 * 节流
		 */
		var inp_throttle = document.getElementById('inp_throttle')
		inp_throttle.addEventListener('input', throttle(sayThrottle, 2000))
		function sayThrottle() {
			console.log(this)
			console.log(arguments)
			console.log('节流成功....')
		}

		function throttle(fn, wait) {
			var previous = 0
			// var $this = this, arg = arguments;
			return function () {
				now = + new Date()
				// debugger
				if (now - previous > wait) {
					fn.apply(this, arguments)
					previous = now
				}
			}
		}

		/**
		 * 节流
		 * @param func 回调函数
		 * @param wait
		 * @returns {Function}
		 */
		// function throttle(func, wait) {
		// 	var previous = 0;
		// 	var $this = this, arg = arguments;
		// 	return function () {
		// 		var now = + new Date()
		// 		if (now - previous > wait) {
		// 			func.apply($this, arguments)
		// 			previous = now
		// 		}
		// 	}
		// }
		// wrap.onmousemove = throttle(getMove, 1000)
	</script>
</body>
</html>
